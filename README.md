# astrbot_plugin_qwen_video

## ✨ 简介
一个[Astrbot](https://github.com/Soulter/AstrBot)插件，接入千问(通义千问)视频生成API，实现文生视频和图生视频功能。

## 📦安装
通过astrbot自带插件商店搜索`astrbot_plugin_qwen_video`一键安装。

## ⚙配置

请在Astrbot的控制面板配置。

插件管理 -> astrbot_plugin_qwen_video -> 操作 -> 插件配置

| 配置项 | 说明 | 默认值 |
| :-------- | :------------------- | :------------------------------------------- |
| `api_url` | API的请求地址 | `https://ai.gitee.com/v1/async/videos/generations` |
| `task_url` | 任务查询地址 | `https://ai.gitee.com/v1/task` |
| `api_key` | 千问API服务提供的密钥 | 无 |
| `model` | 视频生成模型名称 | `Wan2.1-T2V-1.3B` |
| `num_inference_steps` | 推理步数(控制生成质量) | `50` |
| `num_frames` | 视频帧数(81帧约3-4秒) | `81` |
| `negative_prompt` | 负面提示词(可选) | 无 |
| `timeout` | 任务超时时间(秒) | `1800` |
| `retry_interval` | 状态查询间隔(秒) | `10` |


## ⌨️使用方法
**文生视频**：`文生视频 <提示词>`
> 根据你提供的文字描述生成视频。

**图生视频**：`图生视频 <提示词> + 图片`
> 根据你提供的图片和可选的文字描述生成视频。注意：千问目前仅支持单张图片。

## 📌示例

### 文生视频
> **你:**
> 文生视频 年轻的中国女性穿着传统红色古装，轻轻撩起红纱盖头，面带微笑
>
> **Bot:**
> 收到文生视频请求，生成中请稍候...
> 任务已创建 (ID: xxx-xxx-xxx)，正在生成视频...
>
> `[此处会发送生成的视频]`

### 图生视频
> **你:**
> 图生视频 让画面动起来
> `[此处附上一张图片]`
>
> **Bot:**
> 收到图生视频请求，共计 1 张图片，生成中请稍候...
> 任务已创建 (ID: xxx-xxx-xxx)，正在生成视频...
>
> `[此处会发送生成的视频]`

## 📝说明

- 视频生成采用异步任务模式，创建任务后会自动轮询状态
- 生成时间取决于服务器负载，通常需要几分钟
- 图生视频目前仅支持单张图片作为输入
- 可通过调整 `num_inference_steps` 和 `num_frames` 控制视频质量和时长

## 更新日志

`V1.0` 插件首次发布，支持千问视频生成API，包含文生视频和图生视频功能。

# 支持

[帮助文档](https://astrbot.app)